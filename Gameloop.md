# 游戏循环系统文档

## 1. 核心循环

### 1.1 时间系统
- 游戏时间以天为单位推进
- 每天分为多个时间片（Time Slice）
- 每个时间片内进行资源更新、需求计算和交互处理

### 1.2 主要更新顺序
1. 资源系统更新
2. 建筑系统更新
3. 代理（Agent）系统更新
4. 社会系统更新
5. 经济系统更新

## 2. 资源系统循环

### 2.1 资源生产
- 基础资源自然生成
  - 食物、水、木材等基础资源随时间自然增长
  - 增长速率受环境因素影响
- 加工资源生产
  - 需要相应建筑和工人
  - 生产效率受工人技能和建筑效率影响

### 2.2 资源消耗
- 代理需求消耗
  - 食物、水等基本需求
  - 娱乐、文化等高级需求
- 建筑维护消耗
  - 金钱维护成本
  - 资源维护成本

### 2.3 资源流通
- 代理间交易
- 建筑间资源转移
- 市场供需调节

## 3. 建筑系统循环

### 3.1 建筑状态
- 建设中（UnderConstruction）
  - 需要工人和资源
  - 建设进度随时间推进
- 运营中（Operating）
  - 正常生产资源
  - 需要工人维护
- 升级中（Upgrading）
  - 提升建筑能力
  - 需要额外资源
- 受损（Damaged）
  - 效率降低
  - 需要维修
- 废弃（Abandoned）
  - 停止运作
  - 可以拆除

### 3.2 建筑生产
- 资源转换
  - 输入资源处理
  - 输出资源生产
- 效率计算
  - 工人数量影响
  - 工人技能加成
  - 维护状态影响

## 4. 代理（Agent）系统循环

### 4.1 需求系统
- 基本需求
  - 饥饿度
  - 能量值
  - 健康值
- 高级需求
  - 社交需求
  - 娱乐需求
  - 文化需求

### 4.2 行为系统
- 资源收集
  - 寻找最近资源点
  - 收集效率受技能影响
- 建筑工作
  - 分配至合适建筑
  - 工作表现受技能影响
- 社交互动
  - 建立关系网络
  - 影响传播

### 4.3 技能系统
- 技能学习
  - 工作经验积累
  - 培训提升
- 技能应用
  - 影响工作效率
  - 影响社交能力

## 5. 社会系统循环

### 5.1 关系网络
- 关系建立
  - 基于互动频率
  - 基于性格匹配
- 关系维护
  - 定期互动
  - 资源交换

### 5.2 意识形态
- 思想传播
  - 社交网络影响
  - 教育系统影响
- 价值观演化
  - 环境影响
  - 社会事件影响

## 6. 经济系统循环

### 6.1 市场机制
- 价格波动
  - 供需关系影响
  - 资源稀缺性影响
- 交易行为
  - 代理间交易
  - 建筑间交易

### 6.2 财富分配
- 收入来源
  - 工作收入
  - 交易收入
- 支出项目
  - 生活成本
  - 投资支出

## 7. 系统间交互

### 7.1 资源-建筑交互
- 建筑消耗资源
- 建筑生产资源
- 资源影响建筑效率

### 7.2 建筑-代理交互
- 代理在建筑工作
- 建筑影响代理需求
- 代理影响建筑效率

### 7.3 代理-社会交互
- 代理建立社会关系
- 社会影响代理行为
- 代理影响社会发展

## 8. 平衡机制

### 8.1 资源平衡
- 生产与消耗平衡
- 存储容量限制
- 自然再生限制

### 8.2 经济平衡
- 价格调节机制
- 财富分配机制
- 市场供需平衡

### 8.3 社会平衡
- 关系网络规模限制
- 影响力传播限制
- 意识形态多样性

## 9. 扩展系统

### 9.1 科技系统
- 研究解锁
- 技术应用
- 创新传播

### 9.2 教育系统
- 技能培训
- 知识传播
- 人才培养

### 9.3 环境系统
- 自然资源
- 环境影响
- 可持续发展 